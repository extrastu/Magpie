# Magpie Admin 管理页面设计文档

## 🎯 页面概述

**页面类型**: React SPA  
**SEO需求**: ⭐ (最低)  
**交互需求**: ⭐⭐⭐⭐⭐ (最高)

> 📋 **渲染说明**: 管理页面为React单页应用，需要复杂的交互和状态管理，无SEO需求。

## 🛠 设计原则

管理页面采用与主页面相同的设计语言，保持视觉一致性：
- 使用相同的 DaisyUI 主题系统
- 复用主页面的导航栏设计
- 保持相同的间距、字体、圆角等视觉规范
- 左右分栏布局，确保操作便捷性

## 🔐 认证和访问

### 管理员登录页面 (`/admin/login`)
```
┌─────────────────────────────────────────────────────┐
│                  [Magpie Logo]                      │
│                   管理员登录                        │
│                                                     │
│   ┌─────────────────────────────────────────────┐   │
│   │                                             │   │
│   │  [🔑] Password                              │   │
│   │  ████████████████████████████████████████   │   │
│   │                                             │   │
│   │      [登录] [生成新admin账户(首次登入)]     │   │
│   │                                             │   │
│   └─────────────────────────────────────────────┘   │
│                                                     │
│  💡 首次使用？创建管理员身份                         │
└─────────────────────────────────────────────────────┘
```

**功能特点：**
- 简洁的卡片式登录界面
- 密码输入框（password 类型）
- "生成新账户"按钮用于初始化或重置
- 本地存储 session，保持登录状态
- 错误提示友好显示

## 📊 管理主页面 (`/admin`)

### 整体布局
```
┌─────────────────────────────────────────────────────┐
│ [Logo: Magpie] [Dashboard] [Settings] [🏠 返回主页] │
├────────────┬────────────────────────────────────────┤
│            │                                        │
│  管理侧栏  │            管理主内容区                │
│  (25%)     │              (75%)                     │
│            │                                        │
└────────────┴────────────────────────────────────────┘
```

### 管理侧栏 (25% 宽度)

**导航菜单：**
```
Dashboard
├── 📊 Overview
├── 📝 Pending Links (5)
├── 📚 All Links (123)
└── 📋 Recent Activity

Settings
├── ⚙️  System Config  
├── 🔑 API Tokens
├── 🤖 AI Settings
└── 📂 Categories

Tools
├── 📥 Import Data
├── 📤 Export Data
└── 🗑️  Cleanup
```

**样式特点：**
- 使用 DaisyUI 的 menu 组件
- 图标 + 文字的组合
- 待处理条目显示数量badge
- 当前页面高亮显示

### Dashboard 概览页面

```
┌─── 系统概览 ────────────────────────────────────┐
│                                                 │
│  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐│
│  │  123    │ │   5     │ │  12     │ │  1.2GB  ││
│  │总链接数 │ │待确认   │ │本月新增 │ │ 数据库  ││
│  └─────────┘ └─────────┘ └─────────┘ └─────────┘│
└─────────────────────────────────────────────────┘
```

## 🔑 API Token 管理页面 (`/admin/tokens`)

### 主要功能区域

```
┌─── Token ────────────────────────────────────┐
│                                                 │
│  Token ID: #001                                 │  
│  创建时间: 2024-08-01 10:30                      │
│  最后使用: 2024-08-15 14:22                      │
│  状态: 🟢 活跃                                   │
│                                                 │
│  Token: mgp_************************************************│
│         [👁 显示] [📋 复制] [🗑️ 撤销]                    │
│                                                 │
│  Token ID: #002                               │
│  ....                                           │
│  生成新Token                                    │
└─────────────────────────────────────────────────┘

┌─── 生成新Token ─────────────────────────────────┐
│                                                 │
│  Token 备注 (可选)                              │
│  ┌─────────────────────────────────────────────┐ │
│  │ 例如：iPhone 扩展、API集成等                 │ │
│  └─────────────────────────────────────────────┘ │
│                                                 │
│              [生成新Token]                       │
│                                                 │
└─────────────────────────────────────────────────┘
```

### Token 管理功能

**Token 生成：**
- 生成高强度随机 token（mgp_ 前缀）
- 支持设置备注名称
- Token默认永久有效
- 生成后立即显示，只显示一次

**Token 操作：**
- **显示/隐藏**：点击切换 token 显示状态
- **复制**：一键复制到剪贴板，显示成功提示
- **撤销**：软删除，可在数据库中保留记录
- **使用统计**：显示最近使用时间和频次

## 🤖 AI 服务设置页面 (`/admin/ai-settings`)

```
┌─── OpenAI API 配置 ─────────────────────────────┐
│                                                 │
│  API Base URL                                   │
│  ┌─────────────────────────────────────────────┐ │
│  │ https://api.openai.com/v1                   │ │
│  └─────────────────────────────────────────────┘ │
│                                                 │
│  API Key                                        │
│  ┌─────────────────────────────────────────────┐ │
│  │ sk-************************************************ │
│  │ [👁 显示] [测试连接]                          │ │
│  └─────────────────────────────────────────────┘ │
│                                                 │
│  模型选择                                       │
│  ┌─────────────────────────────────────────────┐ │
│  │ 自定义模型名字 (string)                     │ │
│  └─────────────────────────────────────────────┘ │
│                                                 │
│  温度参数 (0.0 - 2.0)          当前: 0.7       │
│  ┌─────────────────────────────────────────────┐ │
│  │ ●════════════════════════════○              │ │
│  └─────────────────────────────────────────────┘ │
│                                                 │
│                   [保存配置]                    │
└─────────────────────────────────────────────────┘

┌─── AI Prompt 模板配置 ─────────────────────────┐
│                                                 │
│  摘要生成 Prompt                                │
│  ┌─────────────────────────────────────────────┐ │
│  │ 请分析以下网页内容，生成50字以内的中文摘要：   │ │
│  │                                             │ │
│  │ 标题：{title}                               │ │
│  │ URL：{url}                                  │ │
│  │ 内容：{content}                             │ │
│  │                                             │ │
│  │ 要求：                                      │ │
│  │ 1. 简洁明了，突出核心观点                    │ │
│  │ 2. 50字以内                                │ │
│  │ 3. 使用中文                                │ │
│  └─────────────────────────────────────────────┘ │
│                                                 │
│  分类建议 Prompt                                │
│  ┌─────────────────────────────────────────────┐ │
│  │ 基于内容，从以下分类中选择最合适的1-2个：     │ │
│  │ {categories}                                │ │
│  │                                             │ │
│  └─────────────────────────────────────────────┘ │
│                                                 │
│  [重置为默认] [保存模板] [测试生成]             │
└─────────────────────────────────────────────────┘
```

### AI 设置功能

**连接测试：**
- 验证 API Key 有效性
- 测试网络连通性
- 显示模型可用性

**Prompt 编辑：**
- 支持变量占位符：`{title}`, `{url}`, `{content}`, `{categories}`
- 实时字符计数
- 语法高亮显示
- 支持 Markdown 格式

**测试功能：**
- 使用示例内容测试 AI 生成
- 显示生成结果和耗时
- 帮助调试 Prompt 效果

## ⚙️ 系统配置页面 (`/admin/system`)

```
┌─── 站点信息 ────────────────────────────────────┐
│                                                 │
│  站点标题                                       │
│  ┌─────────────────────────────────────────────┐ │
│  │ Magpie - 我的链接收藏                        │ │
│  └─────────────────────────────────────────────┘ │
│                                                 │
│  站点描述                                       │
│  ┌─────────────────────────────────────────────┐ │
│  │ 收集和分享有趣的链接和内容                   │ │
│  └─────────────────────────────────────────────┘ │
│                                                 │
│  关于页面 URL (可选)                            │
│  ┌─────────────────────────────────────────────┐ │
│  │ /about                                      │ │
│  └─────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────┘

┌─── 内容设置 ────────────────────────────────────┐
│                                                 │
│  默认分类                                       │
│  ┌─────────────────────────────────────────────┐ │
│  │ 其他                                        │ │
│  └─────────────────────────────────────────────┘ │
│                                                 │
│  分类管理                                       │
│  ┌─────────────────────────────────────────────┐ │
│  │ • 技术    [编辑] [删除]                      │ │
│  │ • 设计    [编辑] [删除]                      │ │  
│  │ • 产品    [编辑] [删除]                      │ │
│  │ • 工具    [编辑] [删除]                      │ │
│  │ • 其他    [编辑] [删除]                      │ │
│  │                                             │ │
│  │ [➕ 添加新分类]                              │ │
│  └─────────────────────────────────────────────┘ │
│                                                 │
│  页面显示数量                                   │
│  ┌─────────────────────────────────────────────┐ │
│  │ [20] [50] [100] 条/页                       │ │
│  └─────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────┘
```

## 📝 待确认链接页面 (`/admin/pending`)

### 页面布局
```
┌─── 待确认链接 (5) ─────── [全部确认] [全部删除] ─┐
│                                                 │
│  ┌─────────────────────────────────────────────┐ │
│  │ ☑️ React 19 最新特性详解                    │ │
│  │    react.dev • 2024-08-15 14:30            │ │
│  │    AI: 介绍React 19的并发特性和新Hook...    │ │
│  │    建议分类: 技术 • 建议标签: React, 前端   │ │
│  │    [快速确认] [详细编辑] [删除]               │ │
│  └─────────────────────────────────────────────┘ │
│                                                 │
│  ┌─────────────────────────────────────────────┐ │
│  │ ☑️ 设计系统最佳实践                          │ │
│  │    design-system.com • 2024-08-15 12:15    │ │
│  │    AI: 构建可扩展设计系统的核心原则...      │ │
│  │    建议分类: 设计 • 建议标签: 设计系统      │ │
│  │    [快速确认] [详细编辑] [删除]               │ │
│  └─────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────┘
```

### 批量操作功能
- **复选框选择**：支持单选和全选
- **快速确认**：直接使用 AI 建议发布
- **批量操作**：确认、删除、重新分析
- **筛选排序**：按时间、域名、分类筛选

## 🎨 视觉设计规范

### 管理页面特有元素

**表单组件：**
- input: `input input-bordered`
- textarea: `textarea textarea-bordered`
- select: `select select-bordered`
- button: `btn btn-primary` / `btn btn-secondary`

**状态指示：**
- 成功：`alert alert-success` + 绿色图标
- 警告：`alert alert-warning` + 黄色图标  
- 错误：`alert alert-error` + 红色图标
- 信息：`alert alert-info` + 蓝色图标

**数据展示：**
- 统计卡片：`card bg-base-100 shadow-sm`
- 数据表格：`table table-zebra`
- 标签badge：`badge badge-outline`

### 响应式适配

**桌面端：**
- 保持左右分栏布局
- 表单元素合理间距
- 批量操作工具栏固定

**移动端：**
- 侧栏折叠为抽屉菜单
- 表单元素垂直堆叠
- 简化批量操作界面

## 🔒 权限和安全

### 访问控制
- Token 验证中间件
- 页面级权限检查
- API 操作权限验证
- 敏感操作二次确认

### 数据安全
- Token 存储加密
- 操作日志记录
- 敏感信息脱敏显示
- 防止 CSRF 攻击

## 🚀 用户体验优化

### 操作反馈
- 保存成功提示toast
- 加载状态骨架屏
- 操作确认对话框
- 实时表单验证

### 快捷操作
- 键盘快捷键支持
- 快速导航面包屑
- 一键重置功能
- 批量操作工具
