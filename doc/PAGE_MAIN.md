# Magpie 主页设计文档

## 🎯 页面概述

**页面类型**: React SPA (爬虫：静态HTML)  
**SEO需求**: ⭐⭐⭐⭐⭐ (最高)  
**交互需求**: ⭐⭐⭐⭐⭐ (最高)

> 📋 **实现说明**: 主页采用简化SEO方案，为搜索引擎爬虫提供静态HTML确保SEO效果，为普通用户提供现代化React SPA体验。服务器根据User-Agent自动判断访问者类型并返回相应内容。详细实现方案请参考 [doc/SEO.md](./SEO.md)。

## 🎨 整体设计理念

简洁设计风格，打造一个现代化、易用的链接收藏展示平台。

## 📱 主页面布局（首页）

### 1. 顶部导航栏
```
┌─────────────────────────────────────────────────────┐
│ [Logo: Magpie] [About] [Archive]    [Search] [Theme]│
└─────────────────────────────────────────────────────┘
```

**导航栏元素：**
- **Logo**：Magpie 文字或图标
- **静态链接**：可配置的静态页面（About、Archive等）
- **搜索框**：支持标题、标签、描述全文搜索
- **主题切换**：DaisyUI 主题选择器
- **响应式设计**：移动端折叠为汉堡菜单

### 2. 主体内容区域

采用左右分栏布局：

```
┌─────────────────────────────────────────────────────┐
│                 顶部导航栏                          │
├────────────┬────────────────────────────────────────┤
│            │                                        │
│   分类栏   │            主内容区                    │
│  (25%)     │            (75%)                       │
│            │                                        │
└────────────┴────────────────────────────────────────┘
```

#### 2.1 左侧分类栏 (25% 宽度)

**功能组件：**
- **分类列表**：按使用频率排序
- **统计信息**：每个分类的链接数量
- **全部链接**：显示总数
- **热门标签**：支持多选筛选，底部集成最近统计

**设计特点：**
```
Categories
├── All (123)
├── 技术 (45)
├── 设计 (23)
├── 产品 (18)
├── 工具 (12)
└── 其他 (8)

Popular Tags
├── #前端 #React #AI #设计...
├── [显示所有] / [收起标签]
└── Today: 2, This Week: 5, Month: 12
```

#### 2.2 右侧主内容区 (75% 宽度)

**月份分组设计：**
```
┌─── 2024年8月 ──────────────────── (12 items) ─┐
│                                               │
│ ┌─────────────────────────────────────────┐   │
│ │                卡片1                    │   │
│ └─────────────────────────────────────────┘   │
│                                               │
│ ┌─────────────────────────────────────────┐   │
│ │                卡片2                    │   │
│ └─────────────────────────────────────────┘   │
│                                               │
└─── 2024年7月 ──────────────────── (18 items) ─┘
```

**分页和加载：**
- React SPA首次加载显示最近20条内容
- "加载更多"按钮异步加载更多内容
- 爬虫访问时显示更多内容（50条）以优化SEO

## 🃏 链接卡片设计

### 卡片结构
```
┌─────────────────────────────────────────────────────┐
│ Article Title Here                                  │
│      example.com                          2024-08-15│
│                                                     │
│ AI生成的简短摘要内容，50字以内的描述...             │
│                                                     │
│ #技术 #前端 #React                         [🔗 访问] │
└─────────────────────────────────────────────────────┘
```

### 卡片元素详解

**1. 头部信息**
- **标题**：链接标题，限制2行显示
- **域名**：显示 host，如 "github.com"，带有虚线下划线样式，支持点击跳转和悬停提示
- **时间戳**：收藏时间，相对时间格式

**2. 主体内容**
- **短评**：用户确认的描述文本，最多3行
- **字数限制**：50字以内，超出显示省略号

**3. 底部操作**
- **标签**：最多显示3个主要标签
- **访问按钮**：新标签页打开原链接
- **更多操作**：编辑、删除（仅管理员可见）

### 卡片交互效果
- **悬停效果**：轻微阴影和缩放
- **点击标题**：新标签页打开原链接
- **点击标签**：筛选该标签的所有链接
- **点击域名**：跳转到搜索页面，以该域名为搜索关键词显示该域名下的所有记录
- **域名悬停**：显示提示框，展示该域名下的链接总数量（如："15 links from github.com"）

## 🎯 响应式设计

### 桌面端 (>1024px)
- 左右分栏布局
- 每行1个卡片
- 卡片宽度固定

### 平板端 (768px - 1024px)
- 左侧栏收起为抽屉
- 主内容区占满宽度
- 卡片保持桌面设计

### 移动端 (<768px)
- 单栏布局
- 顶部导航折叠
- 分类栏变为底部标签页
- 卡片垂直堆叠

## 🔍 搜索功能

### 搜索界面
- **位置**：顶部导航栏右侧
- **样式**：DaisyUI input组件
- **占位符**：搜索标题、标签、描述...

### 搜索功能
- **实时搜索**：输入时即时筛选
- **搜索范围**：标题、描述、标签、域名
- **搜索历史**：本地存储常用搜索词
- **清空按钮**：快速清除搜索条件

### 搜索结果
- **高亮显示**：匹配的关键词高亮
- **结果统计**：显示找到的条目数量
- **无结果提示**：友好的空状态提示

## 🏷️ 筛选和分类

### 分类筛选
- **点击分类**：显示该分类的所有链接
- **面包屑导航**：显示当前筛选条件
- **重置筛选**：快速返回全部内容

### 标签筛选
- **多标签选择**：支持选择多个标签（AND逻辑）
- **标签云**：按使用频率显示标签大小
- **标签建议**：输入时自动补全

### 时间筛选
- **月份选择器**：快速跳转到指定月份
- **年份切换**：切换不同年份的内容
- **时间范围**：自定义时间段筛选

## 🎨 视觉设计规范

### 色彩方案
- **主色调**：使用 DaisyUI 主题系统
- **深色模式**：完整支持深色主题
- **强调色**：链接和重要操作使用主题色
- **中性色**：文本和边框使用灰度色

### 字体排版
- **标题字体**：16px，font-semibold
- **正文字体**：14px，font-normal
- **辅助信息**：12px，opacity-70
- **行高**：1.5倍行距，确保可读性

### 间距规范
- **卡片间距**：mb-4 (16px)
- **内容边距**：p-6 (24px)
- **元素间距**：gap-2 (8px)
- **分栏间距**：gap-6 (24px)

### 圆角和阴影
- **卡片圆角**：rounded-lg (8px)
- **按钮圆角**：rounded-md (6px)
- **卡片阴影**：shadow-sm，hover时shadow-md
- **边框**：border-base-300

## 📚 组件层次结构

### 页面组件
```
HomePage
├── NavBar
│   ├── Logo
│   ├── NavLinks
│   ├── SearchBox
│   └── ThemeToggle
├── MainLayout
│   ├── Sidebar
│   │   ├── CategoryList
│   │   └── RecentStats
│   └── ContentArea
│       ├── MonthSection
│       │   ├── MonthHeader
│       │   └── LinkCard[]
│       └── LoadMoreButton
```

### 通用组件
- **LinkCard** - 链接卡片
- **TagList** - 标签列表
- **SearchBox** - 搜索框
- **CategoryFilter** - 分类筛选
- **LoadingSpinner** - 加载状态
- **EmptyState** - 空状态提示

## 🚀 性能优化

### React SPA优化
- **组件懒加载**：路由级代码分割
- **API缓存**：使用TanStack Query缓存API响应
- **虚拟滚动**：长列表性能优化（可选）
- **分页加载**：异步加载更多内容

### 缓存策略
- **前端缓存**：TanStack Query自动缓存API数据
- **状态管理**：本地存储用户偏好和筛选状态
- **后端缓存**：爬虫页面缓存（10分钟）优化SEO响应速度

## 🧪 用户体验增强

### 微交互
- **加载动画**：skeleton loading
- **过渡效果**：页面切换动画
- **反馈提示**：操作成功/失败提示
- **进度指示**：加载进度条

### 辅助功能
- **键盘导航**：全键盘操作支持
- **屏幕阅读器**：语义化HTML和ARIA
- **颜色对比**：满足WCAG标准
- **字体缩放**：响应系统字体大小

### 用户偏好
- **主题记忆**：记住用户选择的主题
- **筛选记忆**：记住最后的筛选条件
- **分栏宽度**：允许拖拽调整左侧栏宽度
- **显示密度**：紧凑/舒适模式切换