# Magpie 搜索页面设计文档

## 🔍 设计理念

创建一个高效、直观的搜索体验。保持与主页面一致的设计语言和交互模式。

## 📱 搜索页面布局 (`/search`)

### 整体结构
```
┌─────────────────────────────────────────────────────┐
│ [Logo: Magpie] [Home] [About]          [Theme]     │
├─────────────────────────────────────────────────────┤
│                                                     │
│              🔍 搜索您的链接收藏                     │
│                                                     │
│   ┌─────────────────────────────────────────────┐   │
│   │ 🔍 搜索标题、标签、描述...        [🗂️] [⚙️] │   │
│   └─────────────────────────────────────────────┘   │
│                                                     │
│   ┌─ 筛选器 ─┐  ┌─── 搜索结果 ───────────────────┐  │
│   │ 分类      │  │                                │  │
│   │ □ 技术(45)│  │ ┌─────────────────────────────┐│  │
│   │ □ 设计(23)│  │ │        搜索结果卡片        ││  │
│   │ □ 产品(18)│  │ └─────────────────────────────┘│  │
│   │           │  │                                │  │
│   │ 标签      │  │ ┌─────────────────────────────┐│  │
│   │ □ React   │  │ │        搜索结果卡片        ││  │
│   │ □ 设计    │  │ └─────────────────────────────┘│  │
│   │ □ 工具    │  │                                │  │
│   │           │  │          [加载更多]            │  │
│   └───────────┘  └────────────────────────────────┘  │
│                                                     │
└─────────────────────────────────────────────────────┘
```

## 🔍 搜索功能设计

### 主搜索框
```
┌─────────────────────────────────────────────────────┐
│  🔍 搜索标题、标签、描述...          [🗂️] [⚙️]     │
│  ─────────────────────────────────────────────────  │
│  💡 提示：试试搜索 "React"、"设计工具"...          │
└─────────────────────────────────────────────────────┘
```

**功能特点：**
- **占位符文本**：动态提示常用搜索词
- **实时搜索**：输入时延迟 300ms 自动搜索
- **关键词高亮**：搜索结果中高亮匹配词
- **搜索历史**：本地存储最近 10 次搜索
- **键盘快捷键**：`/` 或 `Ctrl+K` 快速聚焦

### 搜索建议和自动完成
```
┌─────────────────────────────────────────────────────┐
│  🔍 Rea|                                           │
│  ─────────────────────────────────────────────────  │
│  💭 搜索建议:                                      │
│    📋 React                                        │
│    📋 React Hook                                   │
│    📋 React 18                                     │
│  📚 最近搜索:                                      │
│    🕐 设计工具                                     │
│    🕐 TypeScript                                   │
│  🏷️ 热门标签:                                      │
│    #前端 #设计 #工具                               │
└─────────────────────────────────────────────────────┘
```

**建议来源：**
- **标题匹配**：从现有链接标题中匹配
- **标签建议**：热门标签和相关标签
- **搜索历史**：用户最近搜索记录
- **智能补全**：基于输入内容的智能推荐

## 🎛️ 筛选器设计

### 左侧筛选栏（桌面端）
```
┌─── 筛选 ─────────────┐
│                      │
│ 📂 分类              │
│ ☑️ 全部 (123)        │
│ ☐ 技术 (45)         │
│ ☐ 设计 (23)         │
│ ☐ 产品 (18)         │
│ ☐ 工具 (12)         │
│ ☐ 其他 (8)          │
│                      │
│ 🏷️ 标签              │
│ ☐ React (15)        │
│ ☐ 前端 (12)         │
│ ☐ 设计系统 (8)      │
│ ☐ TypeScript (6)    │
│ + 显示更多...        │
│                      │
│ 📅 时间范围          │
│ ☐ 最近一周          │
│ ☐ 最近一月          │
│ ☐ 最近三月          │
│ ☐ 最近一年          │
│ ☐ 自定义范围        │
│                      │
│ 🌐 来源域名          │
│ ☐ github.com (20)   │
│ ☐ medium.com (15)   │
│ ☐ dev.to (10)       │
│ + 显示更多...        │
│                      │
│ [重置筛选]           │
└──────────────────────┘
```

### 移动端筛选（抽屉式）
- 搜索框下方显示筛选按钮 `[🗂️ 筛选]`
- 点击打开底部抽屉
- 支持手势滑动关闭

## 📊 搜索结果展示

### 结果统计和排序
```
┌─── 搜索结果 ─────────────────────────────────────────┐
│ 找到 45 个结果，用时 0.12 秒      [最新] [最相关] ▼ │
├─────────────────────────────────────────────────────┤
```

**排序选项：**
- **最相关**：基于匹配度和权重排序
- **最新**：按收藏时间倒序
- **最旧**：按收藏时间正序
- **域名**：按域名字母序排序

### 搜索结果卡片
```
┌─────────────────────────────────────────────────────┐
│ **React** 19 最新特性详解                            │
│ react.dev • 2024-08-15                              │
│                                                     │
│ 详细介绍**React** 19 的并发特性，包括新的 Hook      │
│ 和性能优化方案，帮助开发者更好理解...               │
│                                                     │
│ #技术 #**React** #前端                    [🔗 访问]  │
└─────────────────────────────────────────────────────┘
```

**高亮规则：**
- **搜索词高亮**：匹配的关键词用粗体显示
- **匹配范围**：标题、描述、标签都支持高亮
- **颜色区分**：使用主题色突出显示匹配项

### 搜索结果状态

#### 加载状态
```
┌─────────────────────────────────────────────────────┐
│                   🔍 搜索中...                      │
│                                                     │
│  ████████████░░░░░░░░░░░░░░░░                      │
│                                                     │
│                 正在查找相关内容                     │
└─────────────────────────────────────────────────────┘
```

#### 无结果状态
```
┌─────────────────────────────────────────────────────┐
│                     🔍                              │
│                                                     │
│              未找到相关内容                          │
│                                                     │
│          试试其他关键词或调整筛选条件                │
│                                                     │
│   💡 搜索建议：                                     │
│   • 检查拼写是否正确                                │
│   • 使用更通用的关键词                              │
│   • 减少筛选条件                                    │
│                                                     │
│              [清除筛选] [返回首页]                   │
└─────────────────────────────────────────────────────┘
```

## ⚡ 高级搜索功能

### 搜索语法支持
```
高级搜索语法：
┌─────────────────────────────────────────────────────┐
│ title:React          # 仅在标题中搜索              │
│ tag:前端             # 搜索特定标签                │  
│ domain:github.com    # 搜索特定域名                │
│ category:技术        # 搜索特定分类                │
│ before:2024-08-01    # 搜索指定日期之前            │
│ after:2024-07-01     # 搜索指定日期之后            │
│ "exact phrase"       # 精确短语搜索                │
│ React AND Vue        # 与搜索                       │
│ React OR Vue         # 或搜索                       │
│ React NOT tutorial   # 排除搜索                     │
└─────────────────────────────────────────────────────┘
```

### 搜索保存和分享
```
┌─── 搜索操作 ─────────────────────────────────────────┐
│                                                     │
│  当前搜索：React + 标签:前端 + 分类:技术             │
│                                                     │
│  [💾 保存搜索] [📋 复制链接] [📧 分享] [🔔 订阅更新] │
│                                                     │
└─────────────────────────────────────────────────────┘
```

**功能说明：**
- **保存搜索**：将搜索条件保存为书签
- **复制链接**：生成可分享的搜索URL
- **订阅更新**：新内容匹配时通知（可选功能）

## 📱 响应式设计

### 桌面端 (>1024px)
- 左侧筛选栏 + 右侧结果区域
- 搜索框居中，宽度适中
- 筛选器固定显示

### 平板端 (768px - 1024px)
- 筛选栏可折叠
- 搜索结果占主要空间
- 保持卡片式布局

### 移动端 (<768px)
- 垂直布局，搜索框全宽
- 筛选器改为底部抽屉
- 结果卡片简化显示
- 支持下拉刷新

## ⌨️ 键盘导航

### 快捷键支持
- `/ 或 Ctrl+K` - 聚焦搜索框
- `↑/↓` - 在建议列表中导航
- `Enter` - 执行搜索或选择建议
- `Esc` - 清除搜索或关闭建议
- `Tab` - 在筛选器间导航

### 可访问性
- 完整的键盘导航支持
- 屏幕阅读器友好的标签
- 高对比度颜色方案
- 焦点状态清晰可见

## 🔧 搜索性能优化

### 前端优化
- **防抖搜索**：延迟 300ms 执行搜索
- **结果缓存**：相同搜索条件缓存结果
- **分页加载**：每页加载 20 条结果
- **懒加载**：滚动到底部自动加载更多

### 后端优化
- **全文索引**：SQLite FTS5 全文搜索
- **结果高亮**：服务端处理关键词标记
- **搜索统计**：记录搜索行为用于优化

## 🎨 视觉设计规范

### 搜索特有样式
- **搜索框**：`input input-lg input-bordered focus:outline-primary`
- **筛选器**：`checkbox checkbox-sm` / `radio radio-sm`
- **结果卡片**：与首页保持一致，增加高亮样式
- **加载状态**：`skeleton` 组件或 loading spinner

### 高亮样式
```css
.search-highlight {
  @apply bg-primary/20 text-primary font-semibold rounded px-1;
}
```

### 状态样式
- **筛选激活**：`badge badge-primary`
- **清除按钮**：`btn btn-ghost btn-sm`
- **排序下拉**：`dropdown dropdown-end`

## 📊 搜索分析和统计

### 搜索数据收集
- 搜索关键词统计
- 搜索结果点击率
- 无结果搜索记录
- 筛选器使用情况
